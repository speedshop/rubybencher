{
  "_comment": "This file documents all possible configuration keys. Copy to local.json and modify for your setup.",

  "ruby_version": "3.4.7",
  "_ruby_version_comment": "REQUIRED. Ruby version string (e.g. '3.4.7', '3.3.0'). Used for Docker image selection.",

  "runs_per_instance_type": 3,
  "_runs_per_instance_type_comment": "REQUIRED. Positive integer. Number of benchmark runs per instance type. Total tasks = instance_types * runs_per_instance_type.",

  "task_runners": {
    "count": 3,
    "_count_comment": "OPTIONAL. Max task runners per instance. Can be a number (global) or object with per-provider keys: { 'local': 3, 'aws': 2, 'azure': 1 }. Local defaults to 1; cloud defaults to vCPU count."
  },
  "_task_runners_comment": "OPTIONAL section. If omitted, defaults to 1 task runner per instance type.",

  "local_orchestrator": false,
  "_local_orchestrator_comment": "OPTIONAL. Run orchestrator locally via docker compose instead of terraform. Default: false",

  "skip_infra": false,
  "_skip_infra_comment": "OPTIONAL. Skip terraform, use existing infrastructure. Requires BENCHMARK_ORCHESTRATOR_URL env var. Default: false",

  "mock": false,
  "_mock_comment": "OPTIONAL. Run mock benchmark instead of real benchmark (for testing). Default: false",

  "debug": false,
  "_debug_comment": "OPTIONAL. Enable debug mode (verbose output, keeps task runners alive). Default: false",

  "non_interactive": false,
  "_non_interactive_comment": "OPTIONAL. Skip all interactive prompts (for CI/automation). Default: false",

  "api_key": null,
  "_api_key_comment": "OPTIONAL. API key for orchestrator authentication. Generated randomly if not provided.",

  "local": [
    {
      "instance_type": "docker",
      "alias": "apple-m3-max",
      "_comment": "For local Docker testing. instance_type is typically 'docker', alias describes your machine."
    }
  ],
  "_local_comment": "OPTIONAL. Array of local Docker instances for development/testing.",

  "aws": [
    {
      "instance_type": "c8g.medium",
      "alias": "c8g",
      "_comment": "Graviton4 ARM"
    },
    {
      "instance_type": "c7g.medium",
      "alias": "c7g",
      "_comment": "Graviton3 ARM"
    },
    {
      "instance_type": "c8i.large",
      "alias": "c8i",
      "_comment": "Intel Sapphire Rapids"
    },
    {
      "instance_type": "c7i.large",
      "alias": "c7i",
      "_comment": "Intel Ice Lake"
    },
    {
      "instance_type": "c8a.medium",
      "alias": "c8a",
      "_comment": "AMD EPYC Genoa"
    },
    {
      "instance_type": "c7a.medium",
      "alias": "c7a",
      "_comment": "AMD EPYC Milan"
    }
  ],
  "_aws_comment": "OPTIONAL. Array of AWS EC2 instance types. Each needs instance_type (EC2 type) and alias (short name).",

  "azure": [
    {
      "instance_type": "Standard_D2pls_v6",
      "alias": "D2pls",
      "_comment": "Cobalt ARM"
    },
    {
      "instance_type": "Standard_D2als_v6",
      "alias": "D2als",
      "_comment": "AMD EPYC"
    },
    {
      "instance_type": "Standard_D2ls_v6",
      "alias": "D2ls",
      "_comment": "Intel Sapphire Rapids"
    }
  ],
  "_azure_comment": "OPTIONAL. Array of Azure VM sizes. Each needs instance_type (VM size) and alias (short name).",

  "_validation_notes": [
    "At least one provider (local, aws, or azure) must be specified",
    "ruby_version and runs_per_instance_type are required",
    "Each provider array must have at least one entry if specified",
    "Each entry requires both instance_type and alias fields"
  ]
}
